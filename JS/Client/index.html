<html>
<header></header>

<body>
    <main>
        <canvas id="ctx" width="500" height="500" style="border: 1px solid #000000;"></canvas>
    </main>
</body>

<script src="/socket.io/socket.io.js"></script> 
<script>
    var ctx = document.getElementById("ctx").getContext("2d");
    ctx.font = "30px Arial";
    var socket = io(); 
    socket.on('newPositions', (playerData) => {
        ctx.clearRect(0, 0, 500, 500);
        for (let player of playerData) {
            ctx.fillText(player.name, player.x, player.y);
        }
    });

    document.onkeydown = (keyEvent) => {
        switch (keyEvent.keyCode) {
            case 68:
                socket.emit('userMovement', {
                    key: 'd',
                    keyState: true
                });
                break;
            case 83:
                socket.emit('userMovement', {
                    key: 's',
                    keyState: true
                });
                break;
            case 65:
                socket.emit('userMovement', {
                    key: 'a',
                    keyState: true
                });
                break;
            case 87:
                socket.emit('userMovement', {
                    key: 'w',
                    keyState: true
                });
                break;
        }

    }
    document.onkeyup = (keyEvent) => {
        switch (keyEvent.keyCode) {
            case 68:
                socket.emit('userMovement', {
                    key: 'd',
                    keyState: false
                });
                break;
            case 83:
                socket.emit('userMovement', {
                    key: 's',
                    keyState: false
                });
                break;
            case 65:
                socket.emit('userMovement', {
                    key: 'a',
                    keyState: false
                });
                break;
            case 87:
                socket.emit('userMovement', {
                    key: 'w',
                    keyState: false
                });
                break;
        }

    }
</script>

</html>